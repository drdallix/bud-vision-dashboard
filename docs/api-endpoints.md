
# DoobieDB API Endpoints

## Overview
DoobieDB provides REST-like endpoints for barcode/QR code integration and external access to strain data.

## Base URL
- Development: `http://localhost:5173`
- Production: `https://your-domain.com`

## Endpoints

### 1. Strain Data API

#### GET `/api/strains/:id`
Retrieve detailed information about a specific strain.

**Parameters:**
- `id` (string, required): Strain ID or URL-friendly strain name
- `format` (query, optional): Response format (`json` - default)
- `fields` (query, optional): Comma-separated list of fields to include

**Example Requests:**
```
GET /api/strains/blue-dream
GET /api/strains/12345?fields=name,type,thc,effects
GET /api/strains/og-kush?format=json
```

**Response:**
```json
{
  "data": {
    "id": "12345",
    "name": "Blue Dream",
    "type": "Hybrid",
    "thc": 21,
    "cbd": 2,
    "description": "A balanced hybrid...",
    "effects": ["Relaxed", "Happy", "Euphoric"],
    "flavors": ["Berry", "Sweet", "Earthy"],
    "inStock": true,
    "scannedAt": "2024-01-15T10:30:00Z",
    "confidence": 95
  },
  "status": 200,
  "disclaimer": "All information generated by AI • For recreation and enjoyment only • Not for medical purposes"
}
```

### 2. QR Code Data API

#### GET `/api/qr/:action`
Generate QR code data for various app actions.

**Actions:**
- `scan` - Open package scanner
- `strain` - View specific strain (requires `id` parameter)
- `menu` - View interactive menu
- `app` - Open main application

**Parameters:**
- `action` (string, required): Action type
- `id` (query, optional): Required for `strain` action

**Example Requests:**
```
GET /api/qr/scan
GET /api/qr/strain?id=blue-dream
GET /api/qr/menu
GET /api/qr/app
```

**Response:**
```json
{
  "url": "https://your-domain.com/strain/blue-dream",
  "action": "view_strain",
  "description": "View strain details for blue-dream"
}
```

## QR Code Integration Examples

### 1. Product Package QR Code
Generate a QR code that links directly to strain information:
```
https://your-domain.com/api/qr/strain?id=blue-dream
```

### 2. Scanner Launch QR Code
QR code to open the package scanner:
```
https://your-domain.com/api/qr/scan
```

### 3. Menu Display QR Code
For customer-facing displays:
```
https://your-domain.com/api/qr/menu
```

## Barcode Integration

### Direct Strain Access
Use strain names or IDs in URLs:
```
https://your-domain.com/strain/blue-dream
https://your-domain.com/strain/og-kush
https://your-domain.com/strain/12345
```

### API Data Access
Access raw JSON data:
```
https://your-domain.com/api/strains/blue-dream
```

## Error Responses

### 404 - Strain Not Found
```json
{
  "error": "Strain not found",
  "status": 404
}
```

### 400 - Invalid Parameters
```json
{
  "error": "Invalid action specified",
  "status": 400
}
```

## Use Cases

### 1. Physical Product Labels
Print QR codes on product packaging that link to strain details:
- Generate QR code with URL: `/strain/product-name`
- Customers scan to view full strain information

### 2. Dispensary Menu Boards
Display QR codes for quick access:
- Scanner QR code for staff: `/api/qr/scan`
- Menu QR code for customers: `/api/qr/menu`

### 3. Inventory Management
Barcode integration for quick strain lookup:
- Use strain IDs in barcode systems
- Access via API for inventory software integration

### 4. Customer Education
QR codes on educational materials:
- Link to specific strain effects and information
- Direct access to AI-generated descriptions

## Rate Limits
- No authentication required for public endpoints
- Reasonable use expected for API endpoints
- Real-time data updates via Supabase integration

## Data Freshness
- Strain data updated in real-time
- Changes reflect immediately across all endpoints
- Cached for optimal performance
